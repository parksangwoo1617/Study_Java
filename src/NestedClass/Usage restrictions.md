# 중첩 클래스의 접근 제한
## 바깥 필드와 메소드에서 사용제한
#### 인스턴스 멤버 클래스는 바깥 클래스의 인스턴스 필드의 초기값이나 인스턴스 메소드에서 객체를 생성할 수 있으나 정적 필드나 정적 메소드에서는 불가
#### 정적 멤버 클래스는 모든 필드의 초기값이나 모든 메소드에서 객체를 생성할 수 있음.
## 멤버 클래스에서 사용 제한
#### 인스턴스 멤버 클래스 안에서는 바깥 클래스의 모든 필드와 모든 메소드에 접근할 수 있지만, 정적 멤버 클래스 안에서는 바깥 클래스의 정적 필드와 정적 메소드에만 접근할 수 있다. 
## 로컬 클래스에서 사용 제한
#### 로컬 클래스 내부에서는 바깥 클래스의 필드나 메소드를 제한 없이 사용할 수 있다.
#### 로컬 클래스의 객체는 메소드 실행이 끝나도 힙 메모리에 존재하지만 매개 변수나 로컬 변수는 스택 메모리에서 사라진다. 때문에 로컬 객체에서 사용할 경우 문제가 발생한다.
#### 자바는 이 문제를 해결하기 위해 컴파일 시 로컬 클래스에서 사용하는 매개 변수나 로컬 변수의 값을 로컬 클래스 내부에 복사해두고 사용한다. 그리고 매개 변수나 로컬 변수가 수정되어 값이 변경되면 로컬 클래스에 복사해둔 값과 달라지는 문제를 해결하기 위해 매개 변수나 로컬 변수를 final로 선언해서 수정을 막는다. 결론적으로 로컬 클래스에서 사용 가능한 것은 final로 선언된 매개 변수와 로컬 변수뿐이라는 것이다.
## 자바 7 VS 자바 8
#### 자바 7 이전까지는 final 키워드 없이 선언된 매개 변수나 로컬 변수를 로컬 클래스에서 사용하면 컴파일 에러가 발생했다. 하지만 자바 8부터는 final 키워드 없이 선언된 매개 변수와 로컬 변수를 사용해도 컴파일 에러가 나지 않는다.
### 그럼 자바 8부터는 final이 아닌 매개 변수와 로컬 변수를 허용한다는 걸까?
#### *당연히 아니다.* final 선언을 하지 않아도 여전히 값을 수정할 수 없는 final의 특성을 갖는다는 것이다. final 키워드 존재 여부의 차이점은 로컬 클래스의 복사 위치이다. final 키워드가 있다면 로컬 클래스의 메소드 내부에 지역 변수로 복사되지만, final 키워드가 없다면 로컬 클래스의 필드로 복사된다.
```aidl
void outMethod(final int arg1, int arg2) {
    final int var1 = 1;
    int var2 = 2;
    class LocalClass {
        void method() {
            int result = arg1 + arg2 + var1 + var2;
        }
    }
}
```
#### 위 코드에서 final이 붙어있는 변수와 그렇지 않은 변수를 나누어보면
```aidl
class LocalClass {
    int arg2 = 매개값;
    int var2 = 2;
    void method() {
        int arg1 = 매개값;
        int var1 = 1;
        int result = arg1 + arg2 + var1 + var2;
    }
}
```
#### 위 코드처럼 final이 붙어있던 매개변수와 로컬 변수는 메소드로 들어가고 final이 붙어있지 않은 매개변수와 로컬 변수는 필드로 복사가 된다.
#### 간단하게 생각하면 우리는 로컬 클래스의 내부 복사 위치에 신경 쓸 필요 없이 로컬 클래스에서 사용된 매개 변수와 로컬 변수는 모두 final 특성을 갖는다는 것만 알면 된다.
#### 정리하자면, 로컬 클래스는 바깥 필드와 메소드는 자유롭게 사용하지만 매개변수와 로컬변수는 final 특성을 가지고 있는 것만 사용가능하다. 자바 7에서는 final을 붙이지 않으면 오류가 났지만 자바 8부터는 final을 붙이지 않아도 오류가 나지 않고 그것은 final 특성을 가지고 있는 것이다.
다음 예제는 매개 변수와 로컬 변수가 로컬 클래스에서 사용할 때 final 특성을 갖고 있음을 잘 보여준다.
```aidl
public class Outter {
    //자바 7 이전
    public void method1(final int arg) {
        final int localVariable = 1;
        //arg = 100; (x)
        //localVariable = 100; (x)
        class Inner {
            public void method() {
                int result = arg + localVariable;
            }
        }
    }
    
    //자바 8 이후
    public void method2(int arg) {
        int localVariable = 1;
        //arg = 100; (x)
        //localVariable = 100; (x)
        class Inner {
            public void method() {
                int result = arg + localVariable;
            }
        }
    }
}
```